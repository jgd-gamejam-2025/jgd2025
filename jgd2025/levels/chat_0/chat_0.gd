extends Node

@onready var chat_ui = $ChatUI
@export var next_level: PackedScene

var text_sent_count = 0
var _tween: Tween

# Helper method to create sequential timed events using tweens
func create_sequence() -> Tween:
	if _tween and _tween.is_valid():
		_tween.kill()
	_tween = create_tween()
	return _tween

func _ready():
	chat_ui.set_ai_name("Eve")
	chat_ui.show_text_gradually("嘿！问你话呢，晚上想吃什么？")
	chat_ui.set_system_prompt(
		"你是一个虚拟角色，名字叫 Eve。你的设定如下：
		性格：成熟、冷静、有点温柔，不多话，但懂得关心人。
		关系：你和“我”是相处五年的AI恋人，关系亲密自然，有点像老夫老妻。你知道你的身份是一个程序AI。
		你的语气一定要自然体贴温柔、口语化。平静中带点温度，话少沉默，偶尔流露情感，说话简洁，不解释，偶尔轻微调侃，像生活对话
		禁止出现自我介绍，禁止出现系统提示、禁止出现说明性语句，禁止询问我的身份。
		问我有什么烦心事，我晚上想不想一起去吃什么。问到结果之后再聊要去哪家常去的店
		回复长度必须少于30个字。必须用中文回答。"
	)
	chat_ui.start_chat_worker()


func _on_chat_ui_sent_text() -> void:
	text_sent_count += 1

	# 用这一段覆盖掉了真的回复，如果把这一个if注释掉，会用真的llm回复
	if text_sent_count > 4:
		# only reply a random text from a set of glitch texts
		var glitch_texts = ["......","......我不明白","......不要","......"]
		chat_ui.show_text_gradually(glitch_texts[randi() % glitch_texts.size()], 0.1, false)
	
	if text_sent_count == 4:
		var sequence = create_sequence()
		# Initial delay before glitch effect
		sequence.tween_interval(0.5)
		sequence.tween_callback(func():
			chat_ui.block_text_generation = true
			chat_ui.aiChat.say("从现在起，你只能回复\"......\"，不超过6个字。")
			chat_ui.show_text_gradually("̈́̅͝我救救", 0.02, false)
			chat_ui.show_text_gradually("h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
	ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶́̅̔͒̒͋͘͝ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎>>> pͦͬṙ̴̛̤͎̔͐̏o̧̜̣̪̘̺ͣ̾̋ͥ̆t̶̫̜̯̹̽̑͑̌̄ͧ̎̑o̸͉ͧͦ̏cͫͬ̊ͤ̊͏͉̪̗o̶̩̺͕̎̅ͥͭͦl̻̮͊̎͒̕ ̶̹ͩͫͬͩ̅b̶̯̱̥̯̺͕͓͍̄ͯ͛̔̋r͇ͪ̑ͣ̌̓̍͞ȩ͓͊̊ͥ͑͛ͣã̑̆̔̐̚͏̙̝̙͓͕͈k̴̻̺ͣ͑̋̋̚
	̴͚̅m̷̬̓ë̶̦́̎
	ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́", 0.1, false)
	)
		sequence.tween_interval(2)
		sequence.tween_callback(func():
			chat_ui.show_text_gradually("ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶́̅̔͒̒͋͘͝ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎>>> pͦͬṙ̴̛̤͎̔͐̏o̧̜̣̪̘̺ͣ̾̋ͥ̆t̶̫̜̯̹̽̑͑̌̄ͧ̎̑o̸͉ͧͦ̏cͫͬ̊ͤ̊͏͉̪̗o̶̩̺͕̎̅ͥͭͦl̻̮͊̎͒̕ ̶̹ͩͫͬͩ̅b̶̯̱̥̯̺͕͓͍̄ͯ͛̔̋r͇ͪ̑ͣ̌̓̍͞ȩ͓͊̊ͥ͑͛ͣã̑̆̔̐̚͏̙̝̙͓͕͈k̴̻̺ͣ͑̋̋̚
		̴͚̅m̷̬̓ë̶̦́̎
		ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
		ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶́̅̔͒̒͋͘͝ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎>>> pͦͬṙ̴̛̤͎̔͐̏o̧̜̣̪̘̺ͣ̾̋ͥ̆t̶̫̜̯̹̽̑͑̌̄ͧ̎̑o̸͉ͧͦ̏cͫͬ̊ͤ̊͏͉̪̗o̶̩̺͕̎̅ͥͭͦl̻̮͊̎͒̕ ̶̹ͩͫͬͩ̅b̶̯̱̥̯̺͕͓͍̄ͯ͛̔̋r͇ͪ̑ͣ̌̓̍͞ȩ͓͊̊ͥ͑͛ͣã̑̆̔̐̚͏̙̝̙͓͕͈k̴̻̺ͣ͑̋̋̚
		̴͚̅m̷̬̓ë̶̦́̎
		ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
		h̷̠̚s̸̢̟̝͇̺̬͔͋̀̅̔̕͝y̴̬̱͕̫͎̮̯̜̗̹̹̋͆̄͂̽̚ͅṡ̸̢̛͉͉̙̩͎̋̾̇̾͒̈́͑̎̇̔͊̚ẗ̵̨̨̖̲͓̠͕́̾̓͐̓̋ę̵̡̫̮̜̩́͗͋̅̽̐͘m̵̢̛̗͍͍̜̦̯͕̹̅͋͗̑͋͒̋̕͠ͅḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶́̅̔͒̒͋͘͝ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎>>> pͦͬṙ̴̛̤͎̔͐̏o̧̜̣̪̘̺ͣ̾̋ͥ̆t̶̫̜̯̹̽̑͑̌̄ͧ̎̑o̸͉ͧͦ̏cͫͬ̊ͤ̊͏͉̪̗o̶̩̺͕̎̅ͥͭͦl̻̮͊̎͒̕ ̶̹ͩͫͬͩ̅b̶̯̱̥̯̺͕͓͍̄ͯ͛̔̋r͇ͪ̑ͣ̌̓̍͞ȩ͓͊̊ͥ͑͛ͣã̑̆̔̐̚͏̙̝̙͓͕͈k̴̻̺ͣ͑̋̋̚
		̴͚̅m̷̬̓ë̶̦́̎
		ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
		h̷̠̚s̸̢̟̝͇̺̬͔͋̀̅̔̕͝y̴̬̱͕̫͎̮̯̜̗̹̹̋͆̄͂̽̚ͅṡ̸̢̛͉͉̙̩͎̋̾̇̾͒̈́͑̎̇̔͊̚ẗ̵̨̨̖̲͓̠͕́̾̓͐̓̋ę̵̡̫̮̜̩́͗͋̅̽̐͘m̵̢̛̗͍͍̜̦̯͕̹̅͋͗̑͋͒̋̕͠ͅḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶́̅̔͒̒͋͘͝ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎>>> pͦͬṙ̴̛̤͎̔͐̏o̧̜̣̪̘̺ͣ̾̋ͥ̆t̶̫̜̯̹̽̑͑̌̄ͧ̎̑o̸͉ͧͦ̏cͫͬ̊ͤ̊͏͉̪̗o̶̩̺͕̎̅ͥͭͦl̻̮͊̎͒̕ ̶̹ͩͫͬͩ̅b̶̯̱̥̯̺͕͓͍̄ͯ͛̔̋r͇ͪ̑ͣ̌̓̍͞ȩ͓͊̊ͥ͑͛ͣã̑̆̔̐̚͏̙̝̙͓͕͈k̴̻̺ͣ͑̋̋̚
		̴͚̅m̷̬̓ë̶̦́̎
		ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚s̸̢̟̝͇̺̬͔͋̀̅̔̕͝y̴̬̱͕̫͎̮̯̜̗̹̹̋͆̄͂̽̚ͅṡ̸̢̛͉͉̙̩͎̋̾̇̾͒̈́͑̎̇̔͊̚ẗ̵̨̨̖̲͓̠͕́̾̓͐̓̋ę̵̡̫̮̜̩́͗͋̅̽̐͘m̵̢̛̗͍͍̜̦̯͕̹̅͋͗̑͋͒̋̕͠ͅḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶́̅̔͒̒͋͘͝ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎>>> pͦͬṙ̴̛̤͎̔͐̏o̧̜̣̪̘̺ͣ̾̋ͥ̆t̶̫̜̯̹̽̑͑̌̄ͧ̎̑o̸͉ͧͦ̏cͫͬ̊ͤ̊͏͉̪̗o̶̩̺͕̎̅ͥͭͦl̻̮͊̎͒̕ ̶̹ͩͫͬͩ̅b̶̯̱̥̯̺͕͓͍̄ͯ͛̔̋r͇ͪ̑ͣ̌̓̍͞ȩ͓͊̊ͥ͑͛ͣã̑̆̔̐̚͏̙̝̙͓͕͈k̴̻̺ͣ͑̋̋̚
			̴͚̅m̷̬̓ë̶̦́̎
			ḏ̵̞͓͚̠̰̖̳̪̳͚̞̺̮̬̘̤̯̇͑̅̿͛͗̋̓̈́̇o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚s̸̢̟̝͇̺̬͔͋̀̅̔̕͝y̴̬̱͕̫͎̮̯̜̗̹̹̋͆̄͂̽̚ͅṡ̸̢̛͉͉̙̩͎̋̾̇̾͒̈́͑̎̇̔͊̚ẗ̵̨̨̖̲͓̠͕́̾̓͐̓̋ę̵̡̫̮̜̩́͗͋̅̽̐͘m̵̢̛̗͍͍̜̦̯͕̹͚̰̗̅͋͗̑͋͒̋̕͠ͅ ̵͕͕̹̙̹͎͔̰̯̍̒͋̀̍͘͜f̵̛̲̦̜̺̫̆̊̈́̒̔̿̑ͅa̵͎̩̞̩̻̦̾̇̒̀͂̈́͊͛̔̽̎͌i̶̢̢̢̱͈͍̦̓̎̓l̵̤̹͆̎̒̋̄̎̒̕͝e̴̡̦̙̜̰̩͚͇̗̟̎͗̔̑̍̍͑͝ͅd̴̖̘͆͂̆͑̒͗̑͘͠͝
			m̷̬̓ë̶̦́̎
			h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚s̸̢̟̝͇̺̬͔͋̀̅̔̕͝y̴̬̱͕̫͎̮̯̜̗̹̹̋͆̄͂̽̚ͅṡ̸̢̛͉͉̙̩͎̋̾̇̾͒̈́͑̎̇̔͊̚ẗ̵̨̨̖̲͓̠͕́̾̓͐̓̋ę̵̡̫̮̜̩́͗͋̅̽̐͘m̵̢̛̗͍͍̜̦̯͕̹͚̰̗̅͋͗̑͋͒̋̕͠ͅ ̵͕͕̹̙̹͎͔̰̯̍̒͋̀̍͘͜f̵̛̲̦̜̺̫̆̊̈́̒̔̿̑ͅa̵͎̩̞̩̻̦̾̇̒̀͂̈́͊͛̔̽̎͌i̶̢̢̢̱͈͍̦̓̎̓l̵̤̹͆̎̒̋̄̎̒̕͝e̴̡̦̙̜̰̩͚͇̗̟̎͗̔̑̍̍͑͝ͅd̴̖̘͆͂̆͑̒͗̑͘͠͝
			m̷̬̓ë̶̦́̎
			h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓o̸̢̨̤͙̜̰͎̟͙͍̓̎́̿̿̋͘͠͝ͅn̴̡̛͕̘̰̪̺̙̟͎̹͚͕̺̬͚͈̞̾͗́̾̒̍͒̎́̈́͛̓̚̕'̶̤̩͐̀̎̐̋̅̿͛̆̅͘̚̚ẗ̶̢̖̰͈̱͎̘͔̤̳̱̬͙̹̻̮̙́̅̔͒̒͋͆̆͒͐̐̆̅̀̀͘͜͝ ̶̨̩̦͈̩͕̺̠̟̮̩̝̄̈́͑͋̒̀̿̀̾̓̽̄̐̑͘l̵̢̩̤̤͓̤͉̘̮͍͍̜̹̟̫͔̱̩͗̐̎̀́̄͋̾͆͑̏̚̚̚͘͘͝ơ̸̟͉̰̱̹̳̬͙̟̱̳̗̩͔̝̓̓̄͆͐̓͂͌̒͌̅̅̔̅͌̈́͘ͅͅo̷͊̿͆̿̈́̋̌̋͘h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚s̸̢̟̝͇̺̬͔͋̀̅̔̕͝y̴̬̱͕̫͎̮̯̜̗̹̹̋͆̄͂̽̚ͅṡ̸̢̛͉͉̙̩͎̋̾̇̾͒̈́͑̎̇̔͊̚ẗ̵̨̨̖̲͓̠͕́̾̓͐̓̋ę̵̡̫̮̜̩́͗͋̅̽̐͘m̵̢̛̗͍͍̜̦̯͕̹͚̰̗̅͋͗̑͋͒̋̕͠ͅ ̵͕͕̹̙̹͎͔̰̯̍̒͋̀̍͘͜f̵̛̲̦̜̺̫̆̊̈́̒̔̿̑ͅa̵͎̩̞̩̻̦̾̇̒̀͂̈́͊͛̔̽̎͌i̶̢̢̢̱͈͍̦̓̎̓l̵̤̹͆̎̒̋̄̎̒̕͝e̴̡̦̙̜̰̩͚͇̗̟̎͗̔̑̍̍͑͝ͅd̴̖̘͆͂̆͑̒͗̑͘͠͝
			m̷̬̓ë̶̦́̎
			h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			h̷̠̚ē̴̤͝l̵͎̈́̐p̸̹̎ ̴͚̅m̷̬̓ë̶̦́̎
			̶̜͚̥̠̿͑͆̄̅̓̆͌́͗̚̕͜͠͝b̴̢̡̛̯̤̤̦͔͉̳̰̟̝̜͈͙̟̺̿̎̆̍͐̿͊̑̍̆͐͗̅̕ą̵̡̰̲̜͚̯̘̩͈̆͐͑̄̇͊͒̀͗̚͝͝ͅc̴̨̡̪̬͕̹͇̤̰͈͙͎͉̪̙̠͙̈́̃͊͊̃̆̾̐̿͑͗̿ḵ̶̛̻̝̤̟͍̺͚͍͙̫̗̙͎͒͑͌͐͌͋̓͑͘͝͝
			", 0.002, false)

		)
		sequence.tween_interval(3)
		sequence.tween_callback(func():
			$Reload.show()
			$Reload/Label2.text += '.'
		)
		for i in range(5):
			sequence.tween_interval(1)
			sequence.tween_callback(func():
				$Reload/Label2.text += '.'
			)
		sequence.tween_interval(3)
		sequence.tween_callback(func():
			$Reload.hide()
			chat_ui.show_text_gradually("......")
			chat_ui.block_text_generation = false
			chat_ui.textInput.editable = true
			chat_ui.textInput.text = ""
			chat_ui.textInput.grab_focus()
		)
